(function(a){'use strict';function b(a,b){this.recalc_needed=!0,this.variation_attributes=a,this.variations_available=b,this.variations_current={},this.variations_selected={},this.reset_current=function(){for(var a in this.variation_attributes){this.variations_current[a]={};for(var b=0;b<this.variation_attributes[a].length;b++)this.variations_current[a.toString()][this.variation_attributes[a][b].toString()]=0}},this.update_current=function(){this.reset_current();for(var a=0;a<this.variations_available.length;a++)if(this.variations_available[a].variation_is_active){var b=this.variations_available[a].attributes;for(var c in b){var d=b[c],e=this.variations_selected[c];if(e&&e==d)this.variations_current[c][d]=1;else{var f=!0;for(var g in this.variations_selected)if(g!=c){var h=this.variations_selected[g],j=b[g];h&&j&&h!=j&&(f=!1)}if(f)if(""===d)for(var k in this.variations_current[c])this.variations_current[c][k]=1;else this.variations_current[c][d]=1}}}this.recalc_needed=!1},this.get_current=function(){return this.recalc_needed&&this.update_current(),this.variations_current},this.reset_selected=function(){this.recalc_needed=!0,this.variations_selected={}},this.set_selected=function(a,b){this.recalc_needed=!0,this.variations_selected[a]=b},this.get_selected=function(){return this.variations_selected}}function c(b,c){var d="";return"undefined"!=typeof b&&a.isArray(b.la_additional_images)&&a.each(b.la_additional_images,function(a,b){d+="<div data-thumb=\""+b.thumb[0]+"\" class=\"woocommerce-product-gallery__image\">",c||(d+="<div class=\"zoomouter\"><div class=\"zoominner\">"),d+="<a href=\""+b.large[0]+"\" data-videolink=\""+b.videolink+"\">",d+="<img ",d+="width=\""+b.single[1]+"\" ",d+="height=\""+b.single[2]+"\" ",d+="src=\""+b.single[0]+"\" ",d+="class=\"attachment-shop_single size-shop_single\" ",d+="alt=\""+b.alt+"\" ",d+="title=\""+b.title+"\" ",d+="data-caption=\""+b.caption+"\" ",d+="data-src=\""+b.large[0]+"\" ",d+="data-large_image=\""+b.large[0]+"\" ",d+="data-large_image_width=\""+b.large[1]+"\" ",d+="data-large_image_height=\""+b.large[2]+"\" ",d+="srcset=\""+b.srcset+"\" ",d+="sizes=\""+b.sizes+"\" ",d+="</a>",c||(d+="</div></div>"),d+="</div>"}),d}function d(b,d){var e=b.closest(".product"),f=e.find(".woocommerce-product-gallery.images").parent(),g="",h=!1,i=!1;if(b.closest(".product_item").length&&(h=b.closest(".product_item")),f.closest(".elementor-widget").length&&(i=!0),null!==d)g=c(d,i);else{var j=f.data("old_gallery")||!1;j?g=j:f.data("old_gallery",f.find(".woocommerce-product-gallery__wrapper").html())}if(""!=g&&!h){if(!!f.data("prev_gallery")){var k=a(f.data("prev_gallery")),l=a(g),m=!0;if(k.length==l.length)for(var n=0;n<k.length;n++)a(k[n]).attr("data-thumb")!=a(l[n]).attr("data-thumb")&&(m=!1);else m=!1;if(m)return}f.data("prev_gallery",g);var o="<div class=\"woocommerce-product-gallery--with-images woocommerce-product-gallery la-woo-product-gallery images\" data-columns=\""+f.find(".woocommerce-product-gallery.images").data("columns")+"\">";!f.data("gallery_action")||(o+=f.data("gallery_action")),o+="<figure class=\"woocommerce-product-gallery__wrapper\">"+g+"</figure><div class=\"la_woo_loading\"><div class=\"la-loader spinner3\"><div class=\"dot1\"></div><div class=\"dot2\"></div><div class=\"bounce1\"></div><div class=\"bounce2\"></div><div class=\"bounce3\"></div></div></div></div>",f.removeAttr("data-element-loaded").css({"max-height":f.height(),"min-height":f.height()}).addClass("swatch-loading"),f.html(o);var p=f.find(".woocommerce-product-gallery.images");try{p.wc_product_gallery().addClass("swatch-loaded")}catch(a){}f.css({"max-height":"none","min-height":"200px"}).removeClass("swatch-loading"),a("div.product").first().get(0).scrollIntoView({inline:"nearest",block:"start",behavior:"smooth"}),"undefined"!=typeof LaStudioKits&&i&&LaStudioKits.wooGallery(f.closest(".elementor-widget")),LaStudioWooCommerce.InitGallery(f.closest(".single-product-article"),!1)}}a.fn.lastudio_variation_form=function(){var c=this,e=parseInt(c.data("product_id"),10),f=null,g=!1,h=null,i=!1;if(c.closest(".product_item").length&&(i=!0),c.addClass("la-init-swatches"),c.find("td.label").each(function(){var b=a(this).find("label");b.append("<span class=\"swatch-label\"></span>")}),i){var j=c.closest(".product_item").find("a.woocommerce-loop-product__link").first().attr("href")||c.attr("action");c.find(".swatch-control").each(function(){a(this).append("<div class=\"swatch-wrapper-more\"><a href=\""+j+"\"><i class=\"lastudioicon-i-add\"></i><span>"+(la_theme_config.i18n.more_text||"more")+"</span></a></div>")})}c.on("bind_calculator",function(){var d=c.data("product_variations");g=!1===d,g&&c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var j={};if(c.find(".select-option.selected").each(function(){var b=a(this),c=b.closest("div.select").eq(0),d=c.closest("tr").find(".swatch-label").eq(0),e=c.find("select").first(),f=a("<div/>").html(b.data("value")).text();f=f.replace(/'/g,"\\'"),f=f.replace(/"/g,"\\\""),d&&d.html(e.children("[value='"+f+"']").eq(0).text()),e.trigger("change")}),c.find(".variations select").each(function(b,c){var d=a(c),e=d.data("attribute_name")||d.attr("name");j[e]=[];var f="";if(f=d.find("option:gt(0)").get(),f.length)for(var g,h=0;h<f.length;h++)g=f[h],j[e].push(a(g).val())}),g){h&&h.abort();h=a.ajax({url:la_theme_config.ajax_url,type:"POST",data:{product_id:e,action:"la_swatch_get_product_variations"},success:function(a){f=new b(j,a.data,null,null),c.unblock()}})}else f=new b(j,d,null,null);c.trigger("woocommerce_variation_has_changed")}),c.on("change",".wc-default-select",function(){var b=a(this),c=b.closest("tr").find(".swatch-label").eq(0);""==b.val()?c.html(""):c.html(b.find("option:selected").html())}),c.find(".wc-default-select").trigger("change"),c.on("click",".reset_variations",function(){return c.find(".swatch-label").html(""),c.find(".select-option").removeClass("selected"),c.find(".radio-option").prop("checked",!1),a("span.price",a(".single-price-wrapper[data-product_id=\""+c.data("product_id")+"\"]")).remove(),!1}).on("click",".select-option",function(b){b.preventDefault();var c=a(this),d=c.closest("div.select").eq(0),e=d.closest("tr").find(".swatch-label").eq(0),f=d.find("select").first();if(c.hasClass("disabled"))return!1;if(c.hasClass("selected"))c.removeClass("selected"),f.children("option:eq(0)").prop("selected","selected").change(),e&&e.html("");else{d.find(".select-option").removeClass("selected"),c.addClass("selected");var g=a("<div/>").html(c.data("value")).text();g=g.replace(/'/g,"\\'"),g=g.replace(/"/g,"\\\""),f.trigger("focusin").children("[value='"+g+"']").prop("selected","selected").change(),e&&e.html(f.children("[value='"+g+"']").eq(0).text())}}).on("change",".radio-option",function(){var b=a(this),c=b.closest("div.select").eq(0),d=c.find("select").first(),e=a("<div/>").html(b.val()).text();e=e.replace(/'/g,"\\'"),e=e.replace(/"/g,"\\\""),d.trigger("focusin").children("[value='"+e+"']").prop("selected","selected").change()}).on("woocommerce_variation_has_changed",function(){if(null!==f){c.find(".variations select").each(function(){var b=a(this).data("attribute_name")||a(this).attr("name");f.set_selected(b,a(this).val())});var b=f.get_current();c.find("div.select").each(function(c,d){var e=a(d).find("select").first(),f=e.data("attribute_name")||e.attr("name"),g=b[f];a(d).find("div.select-option").each(function(b,c){g[a(c).data("value")]?a(c).removeClass("disabled"):a(c).addClass("disabled","disabled")}),a(d).find("input.radio-option").each(function(b,c){g[a(c).val()]?(a(c).removeAttr("disabled"),a(c).parent().removeClass("disabled")):(a(c).attr("disabled","disabled"),a(c).parent().addClass("disabled","disabled"))})}),g&&c.find(".wc-default-select").each(function(c,d){var e=a(d),f=e.data("attribute_name")||e.attr("name"),g=b[f];e.find("option:gt(0)").removeClass("attached"),e.find("option:gt(0)").removeClass("enabled"),e.find("option:gt(0)").removeAttr("disabled"),e.find("option:gt(0)").each(function(b,c){g[a(c).val()]?(a(c).addClass("attached"),a(c).addClass("enabled")):a(c).addClass("disabled","disabled")}),e.find("option:gt(0):not(.enabled)").attr("disabled","disabled")})}}).on("found_variation",function(a,b){d(c,b)}).on("reset_image",function(){d(c,null)}),c.find(".single_variation").on("show_variation",function(b,d,e){if(i){var f=c.closest(".product_item");""!=d.price_html&&a("span.price",f).replaceWith(d.price_html);var g,h=f.find(".button.la-addcart").first();h.data("tmptext")?g=h.data("tmptext"):(g=h.text(),h.data("tmptext",g)),e&&c.find(".single_add_to_cart_button").length&&(g=c.find(".single_add_to_cart_button").text()),f.find(".button.la-addcart").attr("title",g),f.find(".button.la-addcart .labtn-text").text(g).attr("title",g)}else{var j=a(".single-price-wrapper[data-product_id=\""+c.data("product_id")+"\"]");a("span.price",j).remove(),j.append(d.price_html)}})},a(function(){var b=[];la_theme_config.la_extension_available.swatches?a(document).on("wc_variation_form","form.variations_form",function(c){var d=a(c.target);b.push(d),!d.data("has_swatches_form")&&(d.data("has_swatches_form",!0),d.lastudio_variation_form(),d.trigger("bind_calculator"),d.on("reload_product_variations",function(){for(var a=0;a<b.length;a++)b[a].trigger("woocommerce_variation_has_changed"),b[a].trigger("bind_calculator"),b[a].trigger("woocommerce_variation_has_changed")}))}):console.log("la_theme_config.la_extension_available.swatches is not activate")})})(jQuery);